<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta
	name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
	/>
	
	<title>Dave P Celebration of Life</title>
	
	<link rel="stylesheet" href="dist/reset.css" />
	<link rel="stylesheet" href="dist/reveal.css" />
	<link rel="stylesheet" href="dist/theme/black.css" />
	
	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css" />
</head>
<body>
	<audio
	data-autoplay
	autoplay
	loop
	id="backgroundMusic"
	src="audio/HoldOnToTheMemories.mp3"
	></audio>
	<div class="reveal">
		<div class="slides" data-autoslide="8000">
			<section data-autoslide="8000" ontouchstart="mobileStart(event)">
				<img
				class="stretch"
				src="images/Sheila/IMG_3480.jpeg"
				alt="reading side"
				/>
				<h3 onClick="var audio = document.getElementById('backgroundMusic');
				audio.play();">Dave P</h3>
			</section>
			<section data-autoslide="8000">
				<img
				class="stretch"
				src="images/Sheila/IMG_5616.jpeg"
				alt="reading side"
				/>
			</section>
			<section data-autoslide="8000">
				<img
				class="stretch"
				src="images/Sheila/IMG_7850.jpeg"
				alt="reading side"
				/>
			</section>
			<section data-autoslide="8000">
				<img
				class="stretch"
				src="images/end_blessing.jpeg"
				alt="reading side"
				/>
			</section>
		</div>
	</div>
	
	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,
			autoSlide: 0,
			loop: false,
			
			// Autoplay
			keyboardCondition: "focused",
			fragments: true,
			// autoSlideStoppable: true,
			
			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
			keyboard: {
				27: () => {
					console.log("esc");
				}, // do something custom when ESC is pressed
				13: "next", // go to the next slide when the ENTER key is pressed
				77: null, // don't do anything when SPACE is pressed (i.e. disable a reveal.js default binding)
			},
		});
	</script>
	<script>

		var audio = document.getElementById("backgroundMusic");
		audio.play();
		console.log("Player started");
		
		Reveal.on("autoslideresumed", (event) => {
			console.log("autoslide RESUMED"); //DEBUG
			var audio = document.getElementById("backgroundMusic");
			audio.play();
		});
		Reveal.on("autoslidepaused", (event) => {
			console.log("autoslide PAUSED"); //DEBUG
			var audio = document.getElementById("backgroundMusic");
			audio.pause()
		});
		
		window.addEventListener("keyup", playPauseKb, false);

		function mobileStart(event) {
			Reveal.toggleAutoSlide();
			audio.play();
		}
		
		function playPauseKb(event) {
			event.preventDefault();
			var x = event.which || event.keyCode;
			if (x === 77) { // 'm' on the keyboard
				var audio = document.getElementById("backgroundMusic");
				if (audio.paused) {
					console.log("Playing");
					audio.play();
				} else {
					console.log("Pausing");
					audio.pause();
				}
			}
		}
	</script>
</body>
</html>
